(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{528:function(t,e,a){"use strict";a.r(e);var s=a(57),v=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"restful-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#restful-api"}},[t._v("#")]),t._v(" Restful API")]),t._v(" "),a("h2",{attrs:{id:"query-api-激活方式和配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#query-api-激活方式和配置"}},[t._v("#")]),t._v(" Query API 激活方式和配置")]),t._v(" "),a("p",[t._v("所有路由均通过 "),a("code",[t._v("~/.plugchain/config/app.toml")]),t._v(" 中以下字段下配置：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("api.enable = true|false")]),t._v(" 字段定义是否启用 REST 服务，默认为 "),a("code",[t._v("false")]),t._v("。")]),t._v(" "),a("li",[a("code",[t._v("api.address = {string}")]),t._v(" 字段定义服务器应绑定到的地址（实际为端口，因为主机应保持在 "),a("code",[t._v("0.0.0.0")]),t._v("）。 默认为 "),a("code",[t._v("tcp://0.0.0.0:1317")]),t._v("。")]),t._v(" "),a("li",[t._v("在 "),a("code",[t._v("~/.plugchain/config/app.toml")]),t._v(" 中定义了一些其他 API 配置选项并附有注释，请直接参考该文件。")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('###############################################################################\n###                           API Configuration                             ###\n###############################################################################\n\n[api]\n\n# Enable defines if the API server should be enabled.\nenable = true\n\n# Swagger defines if swagger documentation should automatically be registered.\nswagger = true\n\n# Address defines the API server to listen on.\naddress = "tcp://0.0.0.0:1317"\n')])])]),a("h3",{attrs:{id:"grpc-gateway-rest-路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grpc-gateway-rest-路由"}},[t._v("#")]),t._v(" gRPC-gateway REST 路由")]),t._v(" "),a("p",[t._v("如果由于各种原因而不能使用 gRPC（例如，您正在构建 Web 应用，且浏览器不支持 gRPC 依赖的 HTTP2），则 Plug Chain Hub 会通过 gRPC-gateway 提供 REST 路由。")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://grpc-ecosystem.github.io/grpc-gateway/",target:"_blank",rel:"noopener noreferrer"}},[t._v("gRPC-gateway"),a("OutboundLink")],1),t._v(" 是将 gRPC 端点公开为 REST 端点的工具。对于 Protobuf 服务中定义的每个 RPC 端点，SDK提供了 REST 等效项。")]),t._v(" "),a("p",[t._v("对于应用程序开发者，需要将 gRPC-gateway REST 路由连接到 REST 服务器，通过在 ModuleManager 上调用 "),a("code",[t._v("RegisterGRPCGatewayRoutes")]),t._v(" 方法完成。")]),t._v(" "),a("h3",{attrs:{id:"swagger"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#swagger"}},[t._v("#")]),t._v(" Swagger")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://swagger.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Swagger"),a("OutboundLink")],1),t._v("（或 OpenAPIv2 ）规范文件在 API 服务器上的 "),a("code",[t._v("/swagger")]),t._v(" 路径下。 Swagger 是一个开放的规范，描述服务器服务的 API 端点，包括描述、输入参数、返回类型以及有关每个端点的更多信息。")]),t._v(" "),a("p",[t._v("可以通过 "),a("code",[t._v("~/.plugchain/config/app.toml")]),t._v(" 中的 "),a("code",[t._v("api.swagger")]),t._v(" 字段配置启用 "),a("code",[t._v("/swagger")]),t._v(" 端点，默认为 "),a("code",[t._v("false")]),t._v("。")]),t._v(" "),a("p",[t._v("对于应用程序开发人员，您可能希望基于自定义模块生成自己的 Swagger 定义。可以从 Plug Chain Hub 的 "),a("a",{attrs:{href:"https://github.com/oracleNetworkProtocol/plugchain/blob/main/scripts/protoc-swagger-gen.sh",target:"_blank",rel:"noopener noreferrer"}},[t._v("Swagger 生成脚本"),a("OutboundLink")],1),t._v("开始。")]),t._v(" "),a("h2",{attrs:{id:"api-端点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-端点"}},[t._v("#")]),t._v(" API 端点")]),t._v(" "),a("p",[a("strong",[t._v("部分 Plug Chain Hub API 端点")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("API Endpoints")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/auth/v1beta1/accounts/{address}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("返回账户信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/auth/v1beta1/params")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询所有参数")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/bank/v1beta1/balances/{address}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询某个账户的所有 token")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/bank/v1beta1/balances/{address}/{denom}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个账户的单种 token 余额")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/bank/v1beta1/denoms_metadata")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询客户端所有已注册 token 的元数据")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/bank/v1beta1/denoms_metadata/{denom}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询客户端一种 token 的元数据")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/bank/v1beta1/params")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询 bank 模块的参数")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/bank/v1beta1/supply")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询所有 token 的总发行量")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/bank/v1beta1/supply/{denom}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一种 token 的总发行量")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/distribution/v1beta1/community_pool")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询社区池中的 token")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/distribution/v1beta1/delegators/{delegator_address}/rewards")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询委托人在每个验证人处累计的总奖励")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/distribution/v1beta1/delegators/{delegator_address}/rewards/{validator_address}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询委托人在一个验证人处累积的奖励")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/distribution/v1beta1/delegators/{delegator_address}/validators")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个委托人所有委托的验证人")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/distribution/v1beta1/delegators/{delegator_address}/withdraw_address")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个委托人的提款地址")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/distribution/v1beta1/params")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询 distribution 模块参数")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/distribution/v1beta1/validators/{validator_address}/commission")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个验证人的累积佣金")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/distribution/v1beta1/validators/{validator_address}/outstanding_rewards")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个验证人的奖励")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/distribution/v1beta1/validators/{validator_address}/slashes")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个验证人的惩罚事件")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/evidence/v1beta1/evidence")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询所有 evidence")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/evidence/v1beta1/evidence/{evidence_hash}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("通过哈希查询 evidence")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/gov/v1beta1/params/{params_type}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询 gov 模块参数")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/gov/v1beta1/proposals")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定状态的所有提议")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/gov/v1beta1/proposals/{proposal_id}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("通过 ID 查询提议")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/gov/v1beta1/proposals/{proposal_id}/deposits")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询某个提议的所有抵押")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/gov/v1beta1/proposals/{proposal_id}/deposits/{depositor}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个提议中一个抵押者的抵押信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/gov/v1beta1/proposals/{proposal_id}/tally")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个提议的投票统计")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/gov/v1beta1/proposals/{proposal_id}/votes")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个提议的所有投票")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/gov/v1beta1/proposals/{proposal_id}/votes/{voter}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个提议中某个投票者的投票信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/params/v1beta1/params")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("通过 subspace 和 key 查询一个模块的指定参数")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/slashing/v1beta1/params")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询 slashing 模块参数")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/slashing/v1beta1/signing_infos")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询所有验证人的签名信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/slashing/v1beta1/signing_infos/{cons_address}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个地址的签名信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/staking/v1beta1/delegations/{delegator_addr}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个委托人所有的委托信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/staking/v1beta1/delegators/{delegator_addr}/redelegations")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个地址的重委托信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/staking/v1beta1/delegators/{delegator_addr}/unbonding_delegations")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询给定委托人的所有解委托信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/staking/v1beta1/delegators/{delegator_addr}/validators")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定委托人的所有验证人信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/staking/v1beta1/delegators/{delegator_addr}/validators/{validator_addr}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定验证人和委托人对的验证人信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/staking/v1beta1/historical_info/{height}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定高度的历史信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/staking/v1beta1/params")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询 staking 模块参数")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/staking/v1beta1/pool")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询池子信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/staking/v1beta1/validators")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询匹配指定状态的所有验证人")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/staking/v1beta1/validators/{validator_addr}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("通过验证人地址查询验证人信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/staking/v1beta1/validators/{validator_addr}/delegations")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个验证人的委托信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/staking/v1beta1/validators/{validator_addr}/delegations/{delegator_addr}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定验证人和委托人之间的委托信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/staking/v1beta1/validators/{validator_addr}/delegations/{delegator_addr}/unbonding_delegation")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定验证人和委托人之间的解委托信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/staking/v1beta1/validators/{validator_addr}/unbonding_delegations")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个验证人的解委托信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/upgrade/v1beta1/applied_plan/{name}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("通过名称查询已应用的升级计划")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/upgrade/v1beta1/current_plan")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询当前升级计划")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/upgrade/v1beta1/upgraded_consensus_state/{last_height}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询共识状态，该状态将用作此链的下一版本的受信任内核")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/base/tendermint/v1beta1/blocks/latest")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("返回最新高度的区块")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/base/tendermint/v1beta1/blocks/{height}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定高度的区块")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/base/tendermint/v1beta1/node_info")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询当前节点信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/base/tendermint/v1beta1/syncing")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询节点同步信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/base/tendermint/v1beta1/validatorsets/latest")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询当前区块验证人集合")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/base/tendermint/v1beta1/validatorsets/{height}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定高度验证人集合")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("POST")]),t._v(" "),a("code",[t._v("/cosmos/tx/v1beta1/simulate")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("模拟交易执行以预估 Gas 消耗")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/tx/v1beta1/txs")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("通过事件筛选交易")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("POST")]),t._v(" "),a("code",[t._v("/cosmos/tx/v1beta1/txs")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("广播交易")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("GET")]),t._v(" "),a("code",[t._v("/cosmos/tx/v1beta1/txs/{hash}")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("通过哈希查询交易")])])])]),t._v(" "),a("h2",{attrs:{id:"查询交易"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询交易"}},[t._v("#")]),t._v(" 查询交易")]),t._v(" "),a("p",[t._v("使用 gRPC-gateway REST 端点查询事务可以通过发送 GET 请求来完成，示例如下所示：")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("Query tx by hash:")]),t._v(" "),a("code",[t._v("/cosmos/tx/v1beta1/txs/{hash}")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X GET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    -H "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"accept: application/json"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:1317/cosmos/tx/v1beta1/txs/{hash}"')]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Query tx by events:")]),t._v(" "),a("code",[t._v("/cosmos/tx/v1beta1/txs")]),t._v(" "),a("a",{attrs:{href:"#%E4%BA%8B%E4%BB%B6"}},[t._v("事件格式 {eventType}.{eventAttribute}={value}")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X GET "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    -H "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"accept: application/json"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:1317/cosmos/tx/v1beta1/txs?events={eventType}.{eventAttribute}={value}&events={eventType}.{eventAttribute}={value}"')]),t._v("\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件"}},[t._v("#")]),t._v(" 事件")]),t._v(" "),a("p",[t._v("事件 在 Cosmos SDK 中作为 ABCI "),a("code",[t._v("Event")]),t._v(" 类型的别名实现，并且\n采用以下形式："),a("code",[t._v("{eventType}.{attributeKey}={attributeValue}")]),t._v("。")]),t._v(" "),a("p",[t._v("一个事件包含：")]),t._v(" "),a("ul",[a("li",[t._v('用于对事件进行高级分类的"类型"; 例如，Cosmos SDK 使用 '),a("code",[t._v('"message"')]),t._v(" 类型通过 "),a("code",[t._v("Msg")]),t._v(" 过滤事件。")]),t._v(" "),a("li",[a("code",[t._v("attributes")]),t._v(" 列表是提供有关分类事件的更多信息的键值对。 例如，对于 "),a("code",[t._v('"message"')]),t._v(" 类型，我们可以使用 "),a("code",[t._v("message.action={some_action}")]),t._v("、"),a("code",[t._v("message.module={some_module}")]),t._v(" 或 "),a("code",[t._v("message.sender={some_sender} 按键值对过滤事件")]),t._v("。")])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("要将属性值解析为字符串，请确保在每个属性值周围添加 "),a("code",[t._v("'")]),t._v("（单引号）。")])]),t._v(" "),a("h4",{attrs:{id:"例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[t._v("#")]),t._v(" 例子")]),t._v(" "),a("p",[t._v("以下示例展示了如何使用 Cosmos SDK 查询事件。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Event")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("tx.height=23")])]),t._v(" "),a("td",[t._v("查询23块高的所有交易")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("tx.hash='DF9738772AAECE776187EFF106190FF169F00C725968A15D23FA1DC9B4A1B651'")])]),t._v(" "),a("td",[t._v("查询指定hash交易")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("message.action='/cosmos.bank.v1beta1.MsgSend'")])]),t._v(" "),a("td",[t._v("查询所有包含 x/bank "),a("code",[t._v("Send")]),t._v(" 的交易。")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("message.module='bank'")])]),t._v(" "),a("td",[t._v("查询所有包含来自 "),a("code",[t._v("x/bank")]),t._v(" 模块的消息的交易。")])])])]),t._v(" "),a("h2",{attrs:{id:"构造和签名交易"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构造和签名交易"}},[t._v("#")]),t._v(" 构造和签名交易")]),t._v(" "),a("p",[t._v("使用 REST 不能构造和签名交易，只能广播交易。您可以使用 "),a("RouterLink",{attrs:{to:"/zh/endpoints/grpc-client.html"}},[t._v("gRPC 客户端")]),t._v(" 构造和签名交易。")],1),t._v(" "),a("h2",{attrs:{id:"广播交易"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#广播交易"}},[t._v("#")]),t._v(" 广播交易")]),t._v(" "),a("p",[t._v("使用 gRPC-gateway REST 端点 "),a("code",[t._v("cosmos/tx/v1beta1/txs")]),t._v(" 广播交易可以通过发送 POST 请求来完成，如下所示，其中 "),a("code",[t._v("NewTxBytes")]),t._v(" 是已签名交易的 protobuf 编码的字节数组：")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"encoding/base64"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendTx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//--剪断--")]),t._v("\n    \n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// base64 对编码的 tx 字节进行编码")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// txBytes 通过 `encCfg.TxConfig.TxEncoder()(txBuilder.GetTx())` 或者 `encCfg.TxConfig.TxJSONEncoder()(txBuilder.GetTx())` 获得")]),t._v("\n\n    NewTxBytes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" base64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StdEncoding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("EncodeToString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("txBytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    fmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NewTxBytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -X POST "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    -H "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Type: application/json"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    -d "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"tx_bytes":"{{NewTxBytes}}","mode":"BROADCAST_MODE_SYNC"}\'')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost:1317/cosmos/tx/v1beta1/txs"')]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=v.exports}}]);
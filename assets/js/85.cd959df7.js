(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{512:function(t,s,a){"use strict";a.r(s);var n=a(57),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"tx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tx"}},[t._v("#")]),t._v(" Tx")]),t._v(" "),a("p",[t._v("签名、广播、查询交易")]),t._v(" "),a("h2",{attrs:{id:"可用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可用命令"}},[t._v("#")]),t._v(" 可用命令")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("a",{attrs:{href:"#plugchaind-tx-sign"}},[t._v("sign")])]),t._v(" "),a("td",[t._v("签名生成的离线交易文件")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"#plugchaind-tx-broadcast"}},[t._v("broadcast")])]),t._v(" "),a("td",[t._v("广播一个已签名交易到网络")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"#plugchaind-tx-multisign"}},[t._v("multisig")])]),t._v(" "),a("td",[t._v("用多个账户为同一交易签名")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"#plugchaind-query-tx"}},[t._v("tx")])]),t._v(" "),a("td",[t._v("使用交易hash查询交易")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"#plugchaind-query-txs"}},[t._v("txs")])]),t._v(" "),a("td",[t._v("使用Tag查询交易")])])])]),t._v(" "),a("h2",{attrs:{id:"plugchaind-tx-sign"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugchaind-tx-sign"}},[t._v("#")]),t._v(" plugchaind tx sign")]),t._v(" "),a("p",[t._v("签名生成的离线交易文件。该文件由"),a("code",[t._v("generate-only")]),t._v("标志生成。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("plugchaind tx sign "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h3",{attrs:{id:"标志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#标志"}},[t._v("#")]),t._v(" 标志")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("命令，速记")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("必须")]),t._v(" "),a("th",[t._v("默认")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("-h，--help")]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td",[t._v("打印帮助")])]),t._v(" "),a("tr",[a("td",[t._v("--append")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("将签名附加到现有签名")])]),t._v(" "),a("tr",[a("td",[t._v("--multisig")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("代表交易签名的multisig帐户的地址")])]),t._v(" "),a("tr",[a("td",[t._v("--from")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("是")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("用于签名的私钥名称")])]),t._v(" "),a("tr",[a("td",[t._v("--offline")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("离线模式")])]),t._v(" "),a("tr",[a("td",[t._v("--signature-only")]),t._v(" "),a("td",[t._v("bool")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("仅打印生成的签名，然后退出")])])])]),t._v(" "),a("h3",{attrs:{id:"生成离线交易"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成离线交易"}},[t._v("#")]),t._v(" 生成离线交易")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("任意类型的离线交易都可以通过追加"),a("code",[t._v("--generate-only")]),t._v("标志来生成")])]),t._v(" "),a("p",[t._v("下面示例中使用Transfer交易：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("plugchaind tx bank send gx1l7422f2ljgmrnzwxgd9rxr8cw3yz63wx89tnqs gx1rkecwy9pjsfd058w0pwa2perquc8xe639n92ms 900000uplugcn --fees 20uplugcn --generate-only "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" unsigned.json\n")])])]),a("p",[a("code",[t._v("unsigned.json")]),t._v(" 看起来是这样的：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"body"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"messages"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"@type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/cosmos.bank.v1beta1.MsgSend"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"from_address"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gx1l7422f2ljgmrnzwxgd9rxr8cw3yz63wx89tnqs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"to_address"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gx1rkecwy9pjsfd058w0pwa2perquc8xe639n92ms"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"denom"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uplugcn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"900000"')]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"memo"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timeout_height"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"extension_options"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"non_critical_extension_options"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"auth_info"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"signer_infos"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"fee"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"denom"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uplugcn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20"')]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gas_limit"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"200000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"payer"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"granter"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"signatures"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"签名离线交易"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#签名离线交易"}},[t._v("#")]),t._v(" 签名离线交易")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("plugchaind tx sign unsigned.json  --from gx1l7422f2ljgmrnzwxgd9rxr8cw3yz63wx89tnqs --chain-id plugchain_520-1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" signed.json\n")])])]),a("p",[a("code",[t._v("signed.json")]),t._v(" 看起来是这样的：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"body"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"messages"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"@type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/cosmos.bank.v1beta1.MsgSend"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"from_address"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gx1l7422f2ljgmrnzwxgd9rxr8cw3yz63wx89tnqs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"to_address"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gx1rkecwy9pjsfd058w0pwa2perquc8xe639n92ms"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"denom"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uplugcn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"900000"')]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"memo"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timeout_height"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"extension_options"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"non_critical_extension_options"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"auth_info"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"signer_infos"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"public_key"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"@type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/cosmos.crypto.secp256k1.PubKey"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"key"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Auouudrg0P86v2kq2lykdr97AJYGHyD6BJXAQtjR1gzd"')]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mode_info"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"single"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mode"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SIGN_MODE_DIRECT"')]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sequence"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"fee"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"denom"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uplugcn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amount"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20"')]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gas_limit"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"200000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"payer"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"granter"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"signatures"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sJewd6lKjma49rAiGVfdT+V0YYerKNx6ZksdumVCvuItqGm24bEN9msh7IJ12Sil1lYjqQjdAcjVCX/77FKlIQ=="')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("签名之后，"),a("code",[t._v("signed.json")]),t._v("中的"),a("code",[t._v("signature")]),t._v("字段将不再为空。")]),t._v(" "),a("p",[t._v("现在准备"),a("a",{attrs:{href:"#plugchaind-tx-broadcast"}},[t._v("广播这个已签名交易")]),t._v("到Plug Chain Hub。")]),t._v(" "),a("h2",{attrs:{id:"plugchaind-tx-broadcast"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugchaind-tx-broadcast"}},[t._v("#")]),t._v(" plugchaind tx broadcast")]),t._v(" "),a("p",[t._v("这个命令用于广播已离线签名的交易到网络。")]),t._v(" "),a("h3",{attrs:{id:"广播离线签名的交易"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#广播离线签名的交易"}},[t._v("#")]),t._v(" 广播离线签名的交易")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("plugchaind tx broadcast signed.json --chain-id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("plugchain_520-1\n")])])]),a("h2",{attrs:{id:"plugchaind-tx-multisign"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugchaind-tx-multisign"}},[t._v("#")]),t._v(" plugchaind tx multisign")]),t._v(" "),a("p",[t._v("用多个账户为一个交易签名。这个交易只有在签名数满足multisig-threshold时才可以广播。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("plugchaind tx multisign "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("signature"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h3",{attrs:{id:"用多签密钥创建离线交易"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用多签密钥创建离线交易"}},[t._v("#")]),t._v(" 用多签密钥创建离线交易")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("没有多签密钥？"),a("RouterLink",{attrs:{to:"/zh/cli-client/keys.html#创建多签密钥"}},[t._v("创建一个")])],1)]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("plugchaind tx bank send "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("from"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("to"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 10uplugcn --fees"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("20uplugcn --chain-id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("plugchain_520-1 --from"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("multisig-keyname"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --generate-only "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" unsigned.json\n")])])]),a("h3",{attrs:{id:"签名多签交易"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#签名多签交易"}},[t._v("#")]),t._v(" 签名多签交易")]),t._v(" "),a("h4",{attrs:{id:"查询多签地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询多签地址"}},[t._v("#")]),t._v(" 查询多签地址")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("plugchaind keys show "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("multisig-keyname"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("h4",{attrs:{id:"签名unsigned-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#签名unsigned-json"}},[t._v("#")]),t._v(" 签名"),a("code",[t._v("unsigned.json")])]),t._v(" "),a("p",[t._v("假定multisig-threshold是2，我们使用2个签名者签名"),a("code",[t._v("unsigned.json")])]),t._v(" "),a("p",[t._v("用signer-1签名：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("plugchaind tx sign unsigned.json --from"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("signer-keyname-"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v(" --chain-id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("plugchain_520-1 --multisig"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("multisig-address"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --signature-only "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" signed-1.json\n")])])]),a("p",[t._v("用signer-2签名：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("plugchaind tx sign unsigned.json --from"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("signer-keyname-"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),t._v(" --chain-id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("plugchain_520-1 --multisig"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("multisig-address"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --signature-only "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" signed-2.json\n")])])]),a("h4",{attrs:{id:"合并签名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#合并签名"}},[t._v("#")]),t._v(" 合并签名")]),t._v(" "),a("p",[t._v("合并所有签名到 "),a("code",[t._v("signed.json")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("plugchaind tx multisign --chain-id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("plugchain_520-1 unsigned.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("multisig-keyname"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" signed-1.json signed-2.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" signed.json\n")])])]),a("p",[t._v("现在可以"),a("a",{attrs:{href:"#plugchaind-tx-broadcast"}},[t._v("广播")]),t._v("这个已签名交易了。")]),t._v(" "),a("h2",{attrs:{id:"plugchaind-query-tx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugchaind-query-tx"}},[t._v("#")]),t._v(" plugchaind query tx")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("plugchaind query tx "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h2",{attrs:{id:"plugchaind-query-txs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugchaind-query-txs"}},[t._v("#")]),t._v(" plugchaind query txs")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("plugchaind query txs --events "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message.sender=<gx...>&message.action=xxxx'")]),t._v(" --page "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" --limit "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n")])])]),a("p",[t._v("其中"),a("code",[t._v("message.action")]),t._v("可取值：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("module")]),t._v(" "),a("th",[t._v("Msg")]),t._v(" "),a("th",[t._v("action")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("bank")]),t._v(" "),a("td",[t._v("cosmos-sdk/MsgSend")]),t._v(" "),a("td",[t._v("transfer")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("cosmos-sdk/MsgMultiSend")]),t._v(" "),a("td",[t._v("transfer")])]),t._v(" "),a("tr",[a("td",[t._v("distribution")]),t._v(" "),a("td",[t._v("cosmos-sdk/MsgModifyWithdrawAddress")]),t._v(" "),a("td",[t._v("set_withdraw_address")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("cosmos-sdk/MsgWithdrawValidatorCommission")]),t._v(" "),a("td",[t._v("withdraw_commission")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("cosmos-sdk/MsgWithdrawDelegatorReward")]),t._v(" "),a("td",[t._v("withdraw_rewards")])]),t._v(" "),a("tr",[a("td",[t._v("gov")]),t._v(" "),a("td",[t._v("cosmos-sdk/MsgSubmitProposal")]),t._v(" "),a("td",[t._v("submit_proposal")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("cosmos-sdk/MsgDeposit")]),t._v(" "),a("td",[t._v("proposal_deposit")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("cosmos-sdk/MsgVote")]),t._v(" "),a("td",[t._v("proposal_vote")])]),t._v(" "),a("tr",[a("td",[t._v("stake")]),t._v(" "),a("td",[t._v("cosmos-sdk/MsgCreateValidator")]),t._v(" "),a("td",[t._v("create_validator")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("cosmos-sdk/MsgEditValidator")]),t._v(" "),a("td",[t._v("edit_validator")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("cosmos-sdk/MsgDelegate")]),t._v(" "),a("td",[t._v("delegate")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("cosmos-sdk/MsgBeginRedelegate")]),t._v(" "),a("td",[t._v("redelegate")])]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[t._v("cosmos-sdk/MsgUndelegate")]),t._v(" "),a("td",[t._v("unbond")])]),t._v(" "),a("tr",[a("td",[t._v("slashing")]),t._v(" "),a("td",[t._v("cosmos-sdk/MsgUnjail")]),t._v(" "),a("td",[t._v("unjail")])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);
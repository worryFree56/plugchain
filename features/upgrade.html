<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Software Upgrade | Plug Chain Documents</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Plug Chain Documents">
    
    <link rel="preload" href="/plugchain/assets/css/0.styles.bfd69eec.css" as="style"><link rel="preload" href="/plugchain/assets/js/app.032ebf29.js" as="script"><link rel="preload" href="/plugchain/assets/js/2.27ddde56.js" as="script"><link rel="preload" href="/plugchain/assets/js/53.5171a605.js" as="script"><link rel="prefetch" href="/plugchain/assets/js/10.6a2b4c7c.js"><link rel="prefetch" href="/plugchain/assets/js/100.e3d0642d.js"><link rel="prefetch" href="/plugchain/assets/js/101.2ed64956.js"><link rel="prefetch" href="/plugchain/assets/js/102.61a524d0.js"><link rel="prefetch" href="/plugchain/assets/js/103.5763eff4.js"><link rel="prefetch" href="/plugchain/assets/js/104.39c0aa70.js"><link rel="prefetch" href="/plugchain/assets/js/105.05b5a67c.js"><link rel="prefetch" href="/plugchain/assets/js/106.d5e891de.js"><link rel="prefetch" href="/plugchain/assets/js/107.6dadcb1e.js"><link rel="prefetch" href="/plugchain/assets/js/108.21465a65.js"><link rel="prefetch" href="/plugchain/assets/js/109.0a9541c6.js"><link rel="prefetch" href="/plugchain/assets/js/11.b2430674.js"><link rel="prefetch" href="/plugchain/assets/js/110.6b77c835.js"><link rel="prefetch" href="/plugchain/assets/js/111.6999b6bb.js"><link rel="prefetch" href="/plugchain/assets/js/112.fb7b9951.js"><link rel="prefetch" href="/plugchain/assets/js/113.cab17121.js"><link rel="prefetch" href="/plugchain/assets/js/114.6b3b13cd.js"><link rel="prefetch" href="/plugchain/assets/js/115.5cdde410.js"><link rel="prefetch" href="/plugchain/assets/js/116.37754711.js"><link rel="prefetch" href="/plugchain/assets/js/117.d1b1427b.js"><link rel="prefetch" href="/plugchain/assets/js/118.ad9a1ca5.js"><link rel="prefetch" href="/plugchain/assets/js/119.84d3c2b2.js"><link rel="prefetch" href="/plugchain/assets/js/12.8f2594a2.js"><link rel="prefetch" href="/plugchain/assets/js/120.be17e49b.js"><link rel="prefetch" href="/plugchain/assets/js/121.09c2efd5.js"><link rel="prefetch" href="/plugchain/assets/js/122.d7795865.js"><link rel="prefetch" href="/plugchain/assets/js/123.f7665737.js"><link rel="prefetch" href="/plugchain/assets/js/124.1026fdd1.js"><link rel="prefetch" href="/plugchain/assets/js/125.f59ed69d.js"><link rel="prefetch" href="/plugchain/assets/js/126.8456053c.js"><link rel="prefetch" href="/plugchain/assets/js/127.18b54a89.js"><link rel="prefetch" href="/plugchain/assets/js/128.dc107f49.js"><link rel="prefetch" href="/plugchain/assets/js/13.364bdf00.js"><link rel="prefetch" href="/plugchain/assets/js/14.62b8c815.js"><link rel="prefetch" href="/plugchain/assets/js/15.3f34c4b4.js"><link rel="prefetch" href="/plugchain/assets/js/16.b4384910.js"><link rel="prefetch" href="/plugchain/assets/js/17.c046237c.js"><link rel="prefetch" href="/plugchain/assets/js/18.569f26b1.js"><link rel="prefetch" href="/plugchain/assets/js/19.041d47ce.js"><link rel="prefetch" href="/plugchain/assets/js/20.a6f5e7d2.js"><link rel="prefetch" href="/plugchain/assets/js/21.c3597e09.js"><link rel="prefetch" href="/plugchain/assets/js/22.cdf4c57a.js"><link rel="prefetch" href="/plugchain/assets/js/23.52b657fc.js"><link rel="prefetch" href="/plugchain/assets/js/24.100124d8.js"><link rel="prefetch" href="/plugchain/assets/js/25.b440e2ed.js"><link rel="prefetch" href="/plugchain/assets/js/26.72916075.js"><link rel="prefetch" href="/plugchain/assets/js/27.3401dd0a.js"><link rel="prefetch" href="/plugchain/assets/js/28.da1bf0cc.js"><link rel="prefetch" href="/plugchain/assets/js/29.72ca96c4.js"><link rel="prefetch" href="/plugchain/assets/js/3.b269ed9d.js"><link rel="prefetch" href="/plugchain/assets/js/30.7d0612e0.js"><link rel="prefetch" href="/plugchain/assets/js/31.47030a9a.js"><link rel="prefetch" href="/plugchain/assets/js/32.930d42df.js"><link rel="prefetch" href="/plugchain/assets/js/33.240d5c18.js"><link rel="prefetch" href="/plugchain/assets/js/34.35c6ea88.js"><link rel="prefetch" href="/plugchain/assets/js/35.b8292607.js"><link rel="prefetch" href="/plugchain/assets/js/36.3b5fc7b3.js"><link rel="prefetch" href="/plugchain/assets/js/37.79e02f52.js"><link rel="prefetch" href="/plugchain/assets/js/38.af23d2c1.js"><link rel="prefetch" href="/plugchain/assets/js/39.76264d77.js"><link rel="prefetch" href="/plugchain/assets/js/4.85a3c52a.js"><link rel="prefetch" href="/plugchain/assets/js/40.0669543c.js"><link rel="prefetch" href="/plugchain/assets/js/41.bf5648c7.js"><link rel="prefetch" href="/plugchain/assets/js/42.e5e37eb3.js"><link rel="prefetch" href="/plugchain/assets/js/43.a7edb2b8.js"><link rel="prefetch" href="/plugchain/assets/js/44.3ca5de46.js"><link rel="prefetch" href="/plugchain/assets/js/45.9549400e.js"><link rel="prefetch" href="/plugchain/assets/js/46.263909ee.js"><link rel="prefetch" href="/plugchain/assets/js/47.1ed7e4aa.js"><link rel="prefetch" href="/plugchain/assets/js/48.73d8ec68.js"><link rel="prefetch" href="/plugchain/assets/js/49.ec7eea9c.js"><link rel="prefetch" href="/plugchain/assets/js/5.c059fe48.js"><link rel="prefetch" href="/plugchain/assets/js/50.22208a40.js"><link rel="prefetch" href="/plugchain/assets/js/51.2ac15085.js"><link rel="prefetch" href="/plugchain/assets/js/52.cc217690.js"><link rel="prefetch" href="/plugchain/assets/js/54.cd57ddbc.js"><link rel="prefetch" href="/plugchain/assets/js/55.14bdddcb.js"><link rel="prefetch" href="/plugchain/assets/js/56.7209c793.js"><link rel="prefetch" href="/plugchain/assets/js/57.b64eeb40.js"><link rel="prefetch" href="/plugchain/assets/js/58.007b83ca.js"><link rel="prefetch" href="/plugchain/assets/js/59.dfb58043.js"><link rel="prefetch" href="/plugchain/assets/js/6.89300679.js"><link rel="prefetch" href="/plugchain/assets/js/60.02cd7075.js"><link rel="prefetch" href="/plugchain/assets/js/61.878ffc75.js"><link rel="prefetch" href="/plugchain/assets/js/62.482eb6b8.js"><link rel="prefetch" href="/plugchain/assets/js/63.eb4e3d08.js"><link rel="prefetch" href="/plugchain/assets/js/64.5de9ccdd.js"><link rel="prefetch" href="/plugchain/assets/js/65.ce399262.js"><link rel="prefetch" href="/plugchain/assets/js/66.e52d2cd5.js"><link rel="prefetch" href="/plugchain/assets/js/67.25213d9a.js"><link rel="prefetch" href="/plugchain/assets/js/68.f2c08a9f.js"><link rel="prefetch" href="/plugchain/assets/js/69.79d01799.js"><link rel="prefetch" href="/plugchain/assets/js/7.238ac748.js"><link rel="prefetch" href="/plugchain/assets/js/70.6752bf41.js"><link rel="prefetch" href="/plugchain/assets/js/71.8967268b.js"><link rel="prefetch" href="/plugchain/assets/js/72.0150d785.js"><link rel="prefetch" href="/plugchain/assets/js/73.e127e732.js"><link rel="prefetch" href="/plugchain/assets/js/74.67b47119.js"><link rel="prefetch" href="/plugchain/assets/js/75.82901251.js"><link rel="prefetch" href="/plugchain/assets/js/76.3758917e.js"><link rel="prefetch" href="/plugchain/assets/js/77.bc3c8557.js"><link rel="prefetch" href="/plugchain/assets/js/78.23e1762e.js"><link rel="prefetch" href="/plugchain/assets/js/79.c72a2013.js"><link rel="prefetch" href="/plugchain/assets/js/8.87a8e582.js"><link rel="prefetch" href="/plugchain/assets/js/80.9aa59088.js"><link rel="prefetch" href="/plugchain/assets/js/81.ac6768f3.js"><link rel="prefetch" href="/plugchain/assets/js/82.f53cca02.js"><link rel="prefetch" href="/plugchain/assets/js/83.4ce136db.js"><link rel="prefetch" href="/plugchain/assets/js/84.1c82d775.js"><link rel="prefetch" href="/plugchain/assets/js/85.cd959df7.js"><link rel="prefetch" href="/plugchain/assets/js/86.db5fb841.js"><link rel="prefetch" href="/plugchain/assets/js/87.ff055ddd.js"><link rel="prefetch" href="/plugchain/assets/js/88.956dd5c5.js"><link rel="prefetch" href="/plugchain/assets/js/89.c893873c.js"><link rel="prefetch" href="/plugchain/assets/js/9.b203014f.js"><link rel="prefetch" href="/plugchain/assets/js/90.c6b94a88.js"><link rel="prefetch" href="/plugchain/assets/js/91.f2ee3795.js"><link rel="prefetch" href="/plugchain/assets/js/92.0a4e963d.js"><link rel="prefetch" href="/plugchain/assets/js/93.bfab0c8e.js"><link rel="prefetch" href="/plugchain/assets/js/94.8bd75939.js"><link rel="prefetch" href="/plugchain/assets/js/95.0b8e343a.js"><link rel="prefetch" href="/plugchain/assets/js/96.cd44ab9d.js"><link rel="prefetch" href="/plugchain/assets/js/97.1499a0b3.js"><link rel="prefetch" href="/plugchain/assets/js/98.6e8667f5.js"><link rel="prefetch" href="/plugchain/assets/js/99.abfd2496.js">
    <link rel="stylesheet" href="/plugchain/assets/css/0.styles.bfd69eec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/plugchain/" class="home-link router-link-active"><!----> <span class="site-name">Plug Chain Documents</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://en.plugchain.info/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Back to Plug Chain
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/oracleNetworkProtocol/plugchain" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Jion us</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Jion us</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://t.me/plugchain" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Telegram
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/Plugchainclub" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/plugchain/features/upgrade.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/plugchain/zh/features/upgrade.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://en.plugchain.info/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Back to Plug Chain
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/oracleNetworkProtocol/plugchain" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Community" class="dropdown-title"><span class="title">Jion us</span> <span class="arrow down"></span></button> <button type="button" aria-label="Community" class="mobile-dropdown-title"><span class="title">Jion us</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://t.me/plugchain" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Telegram
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://twitter.com/Plugchainclub" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/plugchain/features/upgrade.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/plugchain/zh/features/upgrade.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Getting Started</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Concepts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Features</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/plugchain/features/bank.html" class="sidebar-link">Bank</a></li><li><a href="/plugchain/features/distribution.html" class="sidebar-link">Distribution</a></li><li><a href="/plugchain/features/governance.html" class="sidebar-link">Governance</a></li><li><a href="/plugchain/features/liquidity.html" class="sidebar-link">Liquidity</a></li><li><a href="/plugchain/features/mint.html" class="sidebar-link">Mint</a></li><li><a href="/plugchain/features/nft.html" class="sidebar-link">NFT</a></li><li><a href="/plugchain/features/slashing.html" class="sidebar-link">Slashing</a></li><li><a href="/plugchain/features/staking.html" class="sidebar-link">Staking</a></li><li><a href="/plugchain/features/upgrade.html" aria-current="page" class="active sidebar-link">Software Upgrade</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/plugchain/features/upgrade.html#concepts" class="sidebar-link">Concepts</a></li><li class="sidebar-sub-header"><a href="/plugchain/features/upgrade.html#upgrade-process" class="sidebar-link">Upgrade process</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Daemon</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CLI Client</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Endpoints</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Migration</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Pvm</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="software-upgrade"><a href="#software-upgrade" class="header-anchor">#</a> Software Upgrade</h1> <h2 id="concepts"><a href="#concepts" class="header-anchor">#</a> Concepts</h2> <h3 id="plan"><a href="#plan" class="header-anchor">#</a> Plan</h3> <p>The <code>Upgrade</code> module defines a <code>Plan</code> type in which a live upgrade is scheduled to occur. A <code>Plan</code> can be scheduled at a specific block height or time, but not both.
A <code>Plan</code> is created once a (frozen) release candidate along with an appropriate upgrade <code>Handler</code> (see below) is agreed upon, where the <code>Name</code> of a <code>Plan</code> corresponds to a
specific <code>Handler</code>. Typically, a <code>Plan</code> is created through a governance proposal process, where if voted upon and passed, will be scheduled. The <code>Info</code> of a <code>Plan</code>
may contain various metadata about the upgrade, typically application specific upgrade info to be included on-chain such as a git commit that validators could automatically upgrade to.</p> <h4 id="sidecar-process"><a href="#sidecar-process" class="header-anchor">#</a> Sidecar Process</h4> <p>If an operator running the application binary also runs a sidecar process to assist in the automatic download and upgrade of the binary, <code>Info</code> allows this process to be frictionless. That is, the upgrade module implements the specification specified by <a href="https://github.com/cosmos/cosmos-sdk/tree/master/cosmovisor#upgradeable-binary-specification" target="_blank" rel="noopener noreferrer">cosmovisor upgradeable binary specification<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and <code>cosmovisor</code> can Site selection is used to fully automate the upgrade process for node operators. By filling the <code>Info</code> field with the necessary information, the binary can be downloaded automatically. Refer to <a href="https://github.com/cosmos/cosmos-sdk/tree/master/cosmovisor#auto-download" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Plan <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Name                <span class="token builtin">string</span>
    Time                time<span class="token punctuation">.</span>Time
    Height              <span class="token builtin">int64</span>
    Info                <span class="token builtin">string</span>
    UpgradedClientState <span class="token operator">*</span>types<span class="token punctuation">.</span>Any
<span class="token punctuation">}</span>
</code></pre></div><h3 id="handler"><a href="#handler" class="header-anchor">#</a> Handler</h3> <p>The <code>Upgrade</code> module facilitates upgrading from major version X to major version Y. To accomplish this, node operators must first upgrade their current binary to a new binary that has a corresponding <code>Handler</code> for the new version Y. It is assumed that this version has fully been tested and approved by the community at large. This <code>Handler</code> defines what state migrations need to occur before the new binary Y can successfully run the chain. Naturally, this <code>Handler</code> is application specific and not defined on a per-module basis. Registering a <code>Handler</code> is done via <code>Keeper#SetUpgradeHandler</code> in the application.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> UpgradeHandler <span class="token keyword">func</span><span class="token punctuation">(</span>Context<span class="token punctuation">,</span> Plan<span class="token punctuation">)</span>
</code></pre></div><p>During the execution of each <code>BeginBlock</code>, the <code>Upgrade</code> module checks whether there is a <code>plan</code> that should be executed (the block height or time when the <code>BeginBlock</code> is scheduled to run). If it exists, execute the corresponding <code>processor</code>. If the plan is expected to be executed but the corresponding processor is not registered, or the binary upgrade is too early, the node will gracefully panic and exit.</p> <h3 id="storeloader"><a href="#storeloader" class="header-anchor">#</a> StoreLoader</h3> <p>The <code>Upgrade</code> module also facilitates store migrations as part of the upgrade. The <code>StoreLoader</code> sets the migrations that need to occur before the new binary can successfully run the chain. This <code>StoreLoader</code> is also application specific and not defined on a per-module basis. Registering this <code>StoreLoader</code> is done via <code>app#SetStoreLoader</code> in the application.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> UpgradeStoreLoader <span class="token punctuation">(</span>upgradeHeight <span class="token builtin">int64</span><span class="token punctuation">,</span> storeUpgrades <span class="token operator">*</span>store<span class="token punctuation">.</span>StoreUpgrades<span class="token punctuation">)</span> baseapp<span class="token punctuation">.</span>StoreLoader
</code></pre></div><p>If there's a planned upgrade and the upgrade height is reached, the old binary writes <code>UpgradeInfo</code> to the disk before panic'ing.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> UpgradeInfo <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Name    <span class="token builtin">string</span>
    Height  <span class="token builtin">int64</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This information is critical to ensure the <code>StoreUpgrades</code> happens smoothly at correct height and expected upgrade. It eliminates the chances for the new binary to execute <code>StoreUpgrades</code> multiple times everytime on restart. Also if there are multiple upgrades planned on same height, the <code>Name</code> will ensure these <code>StoreUpgrades</code> takes place only in planned upgrade handler.</p> <p>Currently in the upgrade process, the state transition methods involved mainly support the following three types: <code>Renamed</code>, <code>Deleted</code>, and <code>Added</code></p> <h4 id="renamed"><a href="#renamed" class="header-anchor">#</a> Renamed</h4> <p>The user can specify to migrate all data under oldKey (prefix) to storage under newKey (prefix) during the upgrade process.</p> <h4 id="deleted"><a href="#deleted" class="header-anchor">#</a> Deleted</h4> <p>Users can delete all data under the specified key (prefix) during the upgrade process.</p> <h4 id="added"><a href="#added" class="header-anchor">#</a> Added</h4> <p>Users can apply for a new storage area with the specified key as the prefix during the upgrade process.</p> <h3 id="proposal"><a href="#proposal" class="header-anchor">#</a> Proposal</h3> <p>Typically, a <code>Plan</code> is proposed and submitted through governance via a <code>SoftwareUpgradeProposal</code>. This proposal prescribes to the standard governance process. If the proposal passes,
the <code>Plan</code>, which targets a specific <code>Handler</code>, is persisted and scheduled. The upgrade can be delayed or hastened by updating the <code>Plan.Time</code> in a new proposal.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> SoftwareUpgradeProposal <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Title       <span class="token builtin">string</span>
    Description <span class="token builtin">string</span>
    Plan        Plan
<span class="token punctuation">}</span>
</code></pre></div><h4 id="governance-process"><a href="#governance-process" class="header-anchor">#</a> Governance Process</h4> <p>When a upgrade proposal is accepted, the upgrade process is devided into two steps.</p> <h5 id="stop-network-consensus"><a href="#stop-network-consensus" class="header-anchor">#</a> Stop network consensus</h5> <p>After the software upgrade proposal is accepted, the system will perform pre-upgrade preparations at the designated height of the BeginBlock stage, including downloading the upgrade plan and suspending network consensus.</p> <h6 id="download-the-upgrade-plan"><a href="#download-the-upgrade-plan" class="header-anchor">#</a> Download the upgrade plan</h6> <p>In order to be able to upgrade the software smoothly, the information required for the upgrade must be recorded before stopping the network consensus: <code>plan name</code>, <code>upgrade height</code>.</p> <p>-<code>Plan name</code>: When the network restarts, it needs to be routed to the corresponding <code>UpgradeHandler</code> and <code>UpgradeStoreLoader</code> according to the plan name.
-<code>Upgrade height</code>: When the network restarts, check whether the network upgrade plan is required.</p> <h6 id="suspend-network-consensus"><a href="#suspend-network-consensus" class="header-anchor">#</a> Suspend network consensus</h6> <p>After the software upgrade proposal is accepted, the system will gracefully suspend the network consensus at the specified height of the <code>BeginBlock</code> stage.</p> <h5 id="restart-the-new-software"><a href="#restart-the-new-software" class="header-anchor">#</a> Restart the new software</h5> <p>The user replaces the software with the specified version and restarts the network. The system will detect whether the <code>processor</code> specified by the <code>plan name</code> is included. If it is included, the system first executes the <code>Handler</code> program, and then starts the network consensus. If not, the system report an error and exit.</p> <h4 id="cancelling-upgrade-proposals"><a href="#cancelling-upgrade-proposals" class="header-anchor">#</a> Cancelling Upgrade Proposals</h4> <p>The upgrade proposal can be cancelled. There is a proposal type of <code>Cancel Software Upgrade (CancelSoftwareUpgrade)</code>. When this type of proposal is voted through, the currently ongoing upgrade plan will be removed. Of course, this needs to be voted and executed before the upgrade plan is executed.</p> <p>If the current upgrade plan has been executed, but there are problems with the upgrade plan, then the proposal of <code>Cancel Software Upgrade</code> is invalid (because the network has stopped consensus). At this time, there is another solution to make up for this mistake, which is to use the <code>--unsafe-skip-upgrades</code> parameter to skip the specified upgrade height when restarting the network (not really skip the height, but jump via software upgrade <code>Handler</code>). Of course, this requires that 2/3 of the validators participating in the consensus perform the same operation, otherwise the network consensus cannot be reached.</p> <h2 id="upgrade-process"><a href="#upgrade-process" class="header-anchor">#</a> Upgrade process</h2> <h3 id="submit-an-upgrade-proposal"><a href="#submit-an-upgrade-proposal" class="header-anchor">#</a> Submit an upgrade proposal</h3> <p>The first step in the implementation of the software upgrade process is to initiate a software upgrade proposal by the governance module. The proposal details the upgrade height or time. For details, see the above <a href="#Concepts">Concept</a>. An example of the command line to initiate a proposal is as follows:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>plugchaind tx gov submit-proposal software-upgrade <span class="token operator">&lt;</span>plan-name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --deposit <span class="token operator">&lt;</span>deposit<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --upgrade-time <span class="token operator">&lt;</span>upgrade-time<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --title <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --upgrade-info <span class="token operator">&lt;</span>upgrade-info<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --description <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>  <span class="token punctuation">\</span>
  --from<span class="token operator">=</span><span class="token operator">&lt;</span>from<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --chain-id<span class="token operator">=</span><span class="token operator">&lt;</span>chain-id<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --fees<span class="token operator">=</span>20uplugcn <span class="token punctuation">\</span>
  -b block
</code></pre></div><h3 id="deposit-and-vote-for-the-proposal"><a href="#deposit-and-vote-for-the-proposal" class="header-anchor">#</a> Deposit and vote for the proposal</h3> <p>The execution process of the software upgrade proposal is basically the same as that of other ordinary proposals. Both validators and delegators are required to comment on the proposal. For specific information, please refer to <a href="/plugchain/features/governance.html">governance module</a>. An example of the command line to deposit the proposal is as follows:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>plugchaind tx gov deposit <span class="token operator">&lt;</span>proposal-id<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>deposit<span class="token operator">&gt;</span> --from<span class="token operator">=</span><span class="token operator">&lt;</span>from<span class="token operator">&gt;</span> --chain-id<span class="token operator">=</span><span class="token operator">&lt;</span>chain-id<span class="token operator">&gt;</span> --fees<span class="token operator">=</span>20uplugcn -b block -y
</code></pre></div><p>Once the deposit amount reaches the minimum deposit amount, the proposal will enter the voting period, and the validator or delegator needs to vote on the proposal. An example of the command line to initiate a vote is as follows:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>plugchaind tx gov vote <span class="token operator">&lt;</span>proposal-id<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>option<span class="token operator">&gt;</span> --from<span class="token operator">=</span><span class="token operator">&lt;</span>from<span class="token operator">&gt;</span> --chain-id<span class="token operator">=</span><span class="token operator">&lt;</span>chain-id<span class="token operator">&gt;</span> --fees<span class="token operator">=</span>20uplugcn -b block -y
</code></pre></div><p>When the software upgrade proposal is passed, the upgrade module will create an upgrade plan to stop all nodes from the network consensus at a specified height or time, and wait for the new software to restart the network.</p> <h3 id="restart-the-network"><a href="#restart-the-network" class="header-anchor">#</a> Restart the network</h3> <p>When the upgrade proposal is passed and the network reaches the specified upgrade block height or time, all nodes will stop producing blocks. and the user needs to download the source code and compile the new software according to the new version information specified in the first step <a href="#submit-an-upgrade-proposal">Submit Upgrade Proposal</a>, refer to <a href="/plugchain/get-started/install.html">Install</a>. After the new software is installed, restart the node with the new version, and the node will execute the upgrade logic corresponding to the plan name. Once the voting power of the entire network exceeds 2/3 and restarts the network using the new version, the blockchain network will re-reach a new consensus and continue to produce new blocks.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/plugchain/features/staking.html" class="prev">
        Staking
      </a></span> <span class="next"><a href="/plugchain/daemon/intro.html">
        Introduction
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/plugchain/assets/js/app.032ebf29.js" defer></script><script src="/plugchain/assets/js/2.27ddde56.js" defer></script><script src="/plugchain/assets/js/53.5171a605.js" defer></script>
  </body>
</html>
